import { computed, ref } from 'vue'

export type Locale = 'ru' | 'en'

const translations = {
    ru: {
        // Welcome Page
        'welcome.title': 'Shotgun Code',
        'welcome.subtitle': 'Выберите проект для начала работы',
        'welcome.dragDrop': 'или перетащите папку сюда',
        'welcome.openProject': 'Открыть проект',
        'welcome.recentProjects': 'Недавние проекты',
        'welcome.noRecentProjects': 'Нет недавних проектов',
        'welcome.settings': 'Настройки',
        'welcome.autoOpen': 'Автоматически открывать последний проект при запуске',
        'welcome.dropHere': 'Отпустите папку здесь',
        'welcome.toOpenProject': 'Чтобы открыть как проект',
        'welcome.version': 'Версия',

        // File Explorer
        'files.title': 'Файлы проекта',
        'files.selected': 'выбрано',
        'files.refresh': 'Обновить дерево файлов',
        'files.search': 'Поиск файлов...',
        'files.results': 'результатов',
        'files.noFiles': 'Файлы не загружены',
        'files.clear': 'Очистить',
        'files.expandAll': 'Развернуть всё',
        'files.collapseAll': 'Свернуть всё',

        // Context Builder
        'context.builder': 'Построитель контекста',
        'context.buildOptions': 'Параметры построения',
        'context.reset': 'Сброс',
        'context.maxTokens': 'Макс. токенов',
        'context.default': 'По умолчанию',
        'context.stripComments': 'Удалить комментарии',
        'context.includeTests': 'Включить тесты',
        'context.splitStrategy': 'Стратегия разбиения',
        'context.semantic': 'Семантическая',
        'context.fixed': 'Фиксированная',
        'context.adaptive': 'Адаптивная',
        'context.filesSelected': 'файлов выбрано',
        'context.estimated': 'Примерно',
        'context.tokens': 'токенов',
        'context.build': 'Построить контекст',
        'context.building': 'Построение...',
        'context.showOptions': 'Показать опции',
        'context.hideOptions': 'Скрыть опции',
        'context.outputFormat': 'Формат вывода',
        'context.preview': 'Превью контекста',
        'context.copy': 'Копировать',
        'context.export': 'Экспорт',
        'context.clear': 'Очистить',
        'context.files': 'файлов',
        'context.lines': 'строк',
        'context.chars': 'симв.',
        'context.loadMore': 'Загрузить ещё...',
        'context.loading': 'Загрузка превью...',
        'context.notBuilt': 'Контекст ещё не построен',
        'context.selectFiles': 'Выберите файлы и нажмите "Построить контекст"',
        'context.saved': 'Сохранённые контексты',
        'context.noSaved': 'Нет сохранённых контекстов',
        'context.buildToSee': 'Постройте контекст, чтобы увидеть его здесь',
        'context.delete': 'Удалить',
        'context.rename': 'Переименовать',
        'context.duplicate': 'Дублировать',
        'context.favorite': 'В избранное',
        'context.unfavorite': 'Убрать из избранного',
        'context.copyToClipboard': 'Копировать',
        'context.search': 'Поиск в контексте...',
        'context.searchResults': 'найдено',
        'context.noResults': 'Ничего не найдено',
        'context.doubleClickToView': 'Двойной клик для просмотра',
        'context.settings': 'Настройки хранения',
        'context.maxContexts': 'Макс. контекстов',
        'context.maxStorage': 'Макс. размер (MB)',
        'context.autoCleanupDays': 'Автоудаление через (дней)',
        'context.autoCleanupOnLimit': 'Удалять старые при превышении',
        'context.confirmDelete': 'Подтвердите удаление',
        'context.confirmDeleteMessage': 'Вы уверены, что хотите удалить контекст "{name}"?',
        'context.confirmDeleteMultiple': 'Удалить {count} контекстов?',
        'context.cancel': 'Отмена',
        'context.sortBy': 'Сортировка',
        'context.sortByDate': 'По дате',
        'context.sortByName': 'По имени',
        'context.sortBySize': 'По размеру',
        'context.filterFavorites': 'Только избранные',
        'context.selectAll': 'Выбрать все',
        'context.deselectAll': 'Снять выбор',
        'context.deleteSelected': 'Удалить выбранные',
        'context.renamed': 'Контекст переименован',
        'context.duplicated': 'Контекст дублирован',
        'context.deleted': 'Контекст удалён',
        'context.merge': 'Объединить',
        'context.mergeSelected': 'Объединить выбранные',
        'context.merged': 'Контексты объединены',
        'context.mergedName': 'Объединённый контекст',
        'context.selectToMerge': 'Выберите 2+ контекста для объединения',
        'context.dragHint': 'Перетащите для изменения порядка',

        // Action Bar
        'action.project': 'Проект',
        'action.changeProject': 'Сменить проект',
        'action.model': 'Модель',
        'action.tokens': 'Токены',
        'action.cost': 'Стоимость',
        'action.buildContext': 'Построить контекст',
        'action.copy': 'Копировать',
        'action.export': 'Экспорт',
        'action.generateSolution': 'Сгенерировать решение',

        // Right Sidebar
        'tools.title': 'Инструменты',
        'tools.description': 'Дополнительные функции и настройки',
        'tools.copyContext': 'Копировать контекст',
        'tools.exportContext': 'Экспорт контекста',
        'tools.clearContext': 'Очистить контекст',
        'tools.contextStats': 'Статистика контекста',
        'tools.files': 'Файлов',
        'tools.aiModel': 'AI Модель',
        'tools.selectedModel': 'Выбранная модель',
        'tools.aiChat': 'AI Чат',

        // New Sidebar Sections
        'sidebar.stats': 'Статистика',
        'sidebar.history': 'История',
        'sidebar.exportSettings': 'Экспорт',
        'sidebar.prompts': 'Промпты',
        'sidebar.chat': 'AI Чат',
        'sidebar.settings': 'Настройки AI',
        'sidebar.toggle': 'Панель инструментов',

        // File Stats
        'stats.byType': 'По типам файлов',
        'stats.byFolder': 'По папкам',
        'stats.totalFiles': 'Всего файлов',
        'stats.totalLines': 'Всего строк',
        'stats.totalTokens': 'Всего токенов',
        'stats.estimatedCost': 'Примерная стоимость',

        // History
        'history.title': 'История контекстов',
        'history.empty': 'История пуста',
        'history.load': 'Загрузить',
        'history.delete': 'Удалить',
        'history.ago': 'назад',
        'history.justNow': 'только что',
        'history.minutesAgo': 'мин. назад',
        'history.hoursAgo': 'ч. назад',
        'history.daysAgo': 'дн. назад',

        // Export Settings
        'export.format': 'Формат',
        'export.markdown': 'Markdown',
        'export.plainText': 'Простой текст',
        'export.json': 'JSON',
        'export.xml': 'XML',
        'export.includeMetadata': 'Включить метаданные',
        'export.includeLineNumbers': 'Номера строк',
        'export.includeSeparators': 'Разделители файлов',
        'export.wrapInCodeBlocks': 'Обернуть в code blocks',
        'export.maxLineLength': 'Макс. длина строки',
        'export.unlimited': 'Без ограничений',

        // Prompt Templates
        'prompts.title': 'Шаблоны промптов',
        'prompts.empty': 'Нет сохранённых шаблонов',
        'prompts.add': 'Добавить шаблон',
        'prompts.edit': 'Редактировать',
        'prompts.delete': 'Удалить',
        'prompts.use': 'Использовать',
        'prompts.copy': 'Копировать',
        'prompts.name': 'Название шаблона',
        'prompts.content': 'Текст промпта',
        'prompts.placeholder': 'Введите текст промпта...',
        'prompts.variables': 'Переменные: {context}, {files}, {tokens}',
        'prompts.saved': 'Шаблон сохранён',
        'prompts.deleted': 'Шаблон удалён',
        'prompts.copied': 'Промпт скопирован',
        'prompts.default.review': 'Code Review',
        'prompts.default.explain': 'Объяснить код',
        'prompts.default.refactor': 'Рефакторинг',
        'prompts.default.tests': 'Написать тесты',

        // AI Chat
        'chat.title': 'AI Чат',
        'chat.placeholder': 'Введите сообщение...',
        'chat.send': 'Отправить',
        'chat.clear': 'Очистить чат',
        'chat.thinking': 'AI думает...',
        'chat.error': 'Ошибка отправки',
        'chat.retry': 'Повторить',
        'chat.copy': 'Копировать',
        'chat.useContext': 'Использовать контекст',
        'chat.noApiKey': 'API ключ не настроен',
        'chat.configureApi': 'Настроить API',
        'chat.welcome': 'Привет! Я могу помочь с анализом кода.',
        'chat.contextAttached': 'Контекст прикреплён',

        // Model Limits
        'limits.tokens': 'токенов',
        'limits.used': 'использовано',
        'limits.contextUsed': 'Контекст',
        'limits.available': 'Доступно',
        'limits.maxContext': 'Макс. контекст',
        'limits.estCost': 'Прим. стоимость',
        'limits.nearLimit': 'Приближаетесь к лимиту контекста',
        'limits.criticalWarning': 'Критически мало места! Уменьшите контекст',

        // AI Settings
        'settings.aiProvider': 'AI Провайдер',
        'settings.selectProvider': 'Выберите провайдера',
        'settings.apiKey': 'API Ключ',
        'settings.apiKeyPlaceholder': 'Введите API ключ...',
        'settings.selectModel': 'Модель',
        'settings.hostUrl': 'URL хоста',
        'settings.save': 'Сохранить',
        'settings.saving': 'Сохранение...',
        'settings.saved': 'Настройки сохранены',
        'settings.saveFailed': 'Ошибка сохранения',
        'sidebar.settings': 'Настройки',

        // Tabs
        'tabs.files': 'Файлы',
        'tabs.git': 'Git',
        'tabs.contexts': 'Контексты',
        'tabs.tools': 'Инструменты',
        'tabs.chat': 'AI Чат',

        // Git Source
        'git.title': 'Git Источник',
        'git.localGit': 'Локальный Git',
        'git.remoteUrl': 'Удалённый URL',
        'git.currentBranch': 'Текущая ветка',
        'git.branches': 'Ветки',
        'git.commits': 'Коммиты',
        'git.buildingFrom': 'Сборка контекста из',
        'git.clear': 'Очистить',
        'git.filesAtRef': 'Файлы в',
        'git.selectAll': 'Выбрать всё',
        'git.clearSelection': 'Очистить',
        'git.buildContext': 'Построить контекст из',
        'git.repoUrl': 'URL репозитория',
        'git.urlPlaceholder': 'https://github.com/user/repo.git',
        'git.urlHint': 'Поддерживаются GitHub, GitLab, Bitbucket и любые публичные Git URL',
        'git.clone': 'Клонировать репозиторий',
        'git.cloning': 'Клонирование...',
        'git.cloned': 'Репозиторий склонирован',
        'git.openProject': 'Открыть проект',
        'git.remove': 'Удалить',
        'git.notGitRepo': 'Текущий проект не является Git репозиторием',
        'git.openGitProject': 'Откройте проект с папкой .git или используйте вкладку Remote URL',
        'git.current': 'текущая',
        'git.selected': 'выбрана',
        'git.filesSelected': 'файлов выбрано',
        'git.noCheckout': 'Файлы будут прочитаны из этого ref без checkout',
        'git.load': 'Загрузить',
        'git.githubApi': 'GitHub API (быстро, без клонирования)',
        'git.searchFiles': 'Поиск файлов...',
        'git.recent': 'Недавние',
        'git.recentRepos': 'Недавние репозитории',
        'git.clearHistory': 'Очистить',
        'git.cloneRequired': 'URL не поддерживается напрямую. Требуется клонирование:',
        'git.restoredSelection': 'Восстановлен выбор файлов',
        'git.compareBranches': 'Сравнение веток',
        'git.baseBranch': 'Базовая ветка',
        'git.compareBranch': 'Сравниваемая ветка',
        'git.swapBranches': 'Поменять местами',
        'git.noDifferences': 'Нет различий между ветками',
        'git.filesChanged': 'файлов изменено',
        'git.close': 'Закрыть',
        'git.diff': 'Diff',

        // Toasts
        'toast.selectFiles': 'Выберите файлы для построения контекста',
        'toast.contextBuilt': 'Контекст успешно построен',
        'toast.contextError': 'Ошибка при построении контекста',
        'toast.contextCopied': 'Контекст скопирован в буфер обмена',
        'toast.copyError': 'Ошибка при копировании контекста',
        'toast.buildFirst': 'Сначала постройте контекст',
        'toast.contextCleared': 'Контекст очищен',
        'toast.contextEmpty': 'Контекст уже пуст',
        'toast.solutionSoon': 'Генерация решения - скоро будет доступна',
        'toast.noFiles': 'Нет выбранных файлов',
        'toast.refreshed': 'Дерево файлов обновлено',
        'toast.refreshError': 'Ошибка при обновлении дерева файлов',

        // Errors
        'error.generic': 'Произошла ошибка',
        'error.loadFailed': 'Не удалось загрузить данные',
        'error.saveFailed': 'Не удалось сохранить',
        'error.networkError': 'Ошибка сети',
        'error.notFound': 'Не найдено',
        'error.invalidData': 'Некорректные данные',
        'error.suggestions': 'Рекомендации',
        'error.checkFiles': 'Проверьте, что файлы находятся в директории проекта',
        'error.checkPaths': 'Убедитесь, что пути не содержат ".." или абсолютных путей',
        'error.tryRefresh': 'Попробуйте обновить дерево файлов',
        'error.emptyContext': 'Контекст построен, но пуст',

        // Hotkeys
        'hotkey.buildContext': 'Построить контекст (Ctrl+B)',
        'hotkey.export': 'Экспорт контекста (Ctrl+E)',
        'hotkey.copy': 'Копировать контекст (Ctrl+Shift+C)',
        'hotkey.changeProject': 'Сменить проект (Ctrl+Shift+P)',

        // File Filter
        'filter.byType': 'Фильтр по типу',
        'filter.types': 'типов',
        'filter.type': 'тип',
        'filter.searchExtensions': 'Поиск расширений...',
        'filter.selectAll': 'Выбрать всё',
        'filter.clear': 'Очистить',
        'filter.code': 'Код',
        'filter.styles': 'Стили',
        'filter.config': 'Конфигурация',
        'filter.documentation': 'Документация',
        'filter.other': 'Другое',

        // Context Menu
        'contextMenu.selectAll': 'Выбрать всё в папке',
        'contextMenu.deselectAll': 'Снять выбор в папке',
        'contextMenu.copyPath': 'Копировать путь',
        'contextMenu.copyRelativePath': 'Копировать относительный путь',
        'contextMenu.addToIgnore': 'Добавить в игнор',
        'contextMenu.removeFromIgnore': 'Убрать из игнора',
        'contextMenu.expandAll': 'Развернуть всё',
        'contextMenu.collapseAll': 'Свернуть всё',

        // Ignore Rules Modal
        'ignoreModal.title': 'Управление правилами игнорирования',
        'ignoreModal.subtitle': 'Настройка .gitignore и пользовательских правил',
        'ignoreModal.customRules': 'Пользовательские правила',
        'ignoreModal.gitignoreInfo': 'Этот файл управляется Git. Редактируйте его напрямую в проекте.',
        'ignoreModal.gitignorePlaceholder': 'Файл .gitignore не найден',
        'ignoreModal.rulesCount': 'Правил',
        'ignoreModal.testRules': 'Тестировать правила',
        'ignoreModal.customPlaceholder': '# Пример:\n*.log\ntemp/\nnode_modules/',
        'ignoreModal.preview': 'Предпросмотр',
        'ignoreModal.filesWillBeIgnored': 'файлов будут игнорироваться',
        'ignoreModal.andMore': 'и ещё {count}',
        'ignoreModal.reset': 'Сбросить',
        'ignoreModal.clearAll': 'Очистить всё',
        'ignoreModal.cancel': 'Отмена',
        'ignoreModal.save': 'Сохранить',
        'ignoreModal.testComplete': 'Тест завершён',
        'ignoreModal.testFailed': 'Ошибка теста',
        'ignoreModal.saved': 'Правила успешно сохранены',
        'ignoreModal.saveFailed': 'Не удалось сохранить правила',

        // Settings Panel
        'settings.title': 'Настройки проводника',
        'settings.useGitignore': 'Использовать .gitignore',
        'settings.useCustomIgnore': 'Использовать пользовательские правила',
        'settings.autoSaveSelection': 'Автосохранение выбора',
        'settings.compactFolders': 'Компактные вложенные папки',
        'settings.ignoreRules': 'Правила игнорирования',
        'settings.presets': 'Пресеты',
        'settings.restoreSelection': 'Восстановить предыдущий выбор ({count} файлов)',

        // Quick Filters
        'quick.sourceFiles': 'Исходный код',
        'quick.tests': 'Тесты',
        'quick.config': 'Конфигурация',
        'quick.docs': 'Документация',
        'quick.styles': 'Стили',
        'quick.modified': 'Изменённые',
        'quick.clear': 'Очистить',

        // Presets Modal
        'presets.title': 'Пресеты выбора',
        'presets.subtitle': 'Сохранение и загрузка наборов файлов',
        'presets.saveNew': 'Сохранить текущий выбор',
        'presets.name': 'Название пресета...',
        'presets.description': 'Описание (необязательно)...',
        'presets.save': 'Сохранить пресет ({count} файлов)',
        'presets.saved': 'Сохранённые пресеты',
        'presets.noPresets': 'Пресеты ещё не сохранены',
        'presets.files': 'файлов',
        'presets.load': 'Загрузить',
        'presets.delete': 'Удалить',
        'presets.close': 'Закрыть',
        'presets.loaded': 'Пресет загружен',
        'presets.deleted': 'Пресет удалён',
        'presets.saveSuccess': 'Пресет "{name}" сохранён',
        'presets.edit': 'Редактировать',
        'presets.cancelEdit': 'Отмена',
        'presets.saveEdit': 'Сохранить изменения',
        'presets.confirmDelete': 'Подтвердите удаление',
        'presets.confirmDeleteMessage': 'Вы уверены, что хотите удалить пресет "{name}"?',
        'presets.cancel': 'Отмена',
        'presets.showFiles': 'Показать файлы',
        'presets.hideFiles': 'Скрыть файлы',
        'presets.invalidFiles': '{count} файлов не существуют',
        'presets.allFilesValid': 'Все файлы существуют',
        'presets.editSuccess': 'Пресет обновлён',
        'presets.editFailed': 'Не удалось обновить пресет',
        'presets.filesInPreset': 'Файлы в пресете:',
    },
    en: {
        // Welcome Page
        'welcome.title': 'Shotgun Code',
        'welcome.subtitle': 'Select a project to get started',
        'welcome.dragDrop': 'or drag & drop a folder here',
        'welcome.openProject': 'Open Project Directory',
        'welcome.recentProjects': 'Recent Projects',
        'welcome.noRecentProjects': 'No recent projects',
        'welcome.settings': 'Settings',
        'welcome.autoOpen': 'Automatically open last project on startup',
        'welcome.dropHere': 'Drop folder here',
        'welcome.toOpenProject': 'To open as project',
        'welcome.version': 'Version',

        // File Explorer
        'files.title': 'Project Files',
        'files.selected': 'selected',
        'files.refresh': 'Refresh file tree',
        'files.search': 'Search files...',
        'files.results': 'results',
        'files.noFiles': 'No files loaded',
        'files.clear': 'Clear',
        'files.expandAll': 'Expand all',
        'files.collapseAll': 'Collapse all',

        // Context Builder
        'context.builder': 'Context Builder',
        'context.buildOptions': 'Build Options',
        'context.reset': 'Reset',
        'context.maxTokens': 'Max Tokens',
        'context.default': 'Default',
        'context.stripComments': 'Strip comments',
        'context.includeTests': 'Include tests',
        'context.splitStrategy': 'Split Strategy',
        'context.semantic': 'Semantic',
        'context.fixed': 'Fixed',
        'context.adaptive': 'Adaptive',
        'context.filesSelected': 'files selected',
        'context.estimated': 'Estimated',
        'context.tokens': 'tokens',
        'context.build': 'Build Context',
        'context.building': 'Building...',
        'context.outputFormat': 'Output Format',
        'context.preview': 'Context Preview',
        'context.copy': 'Copy',
        'context.export': 'Export',
        'context.clear': 'Clear',
        'context.files': 'files',
        'context.lines': 'lines',
        'context.chars': 'chars',
        'context.loadMore': 'Load more...',
        'context.loading': 'Loading preview...',
        'context.notBuilt': 'No context built yet',
        'context.selectFiles': 'Select files and click "Build Context"',
        'context.saved': 'Saved Contexts',
        'context.noSaved': 'No saved contexts',
        'context.buildToSee': 'Build a context to see it here',
        'context.delete': 'Delete',
        'context.rename': 'Rename',
        'context.duplicate': 'Duplicate',
        'context.favorite': 'Add to favorites',
        'context.unfavorite': 'Remove from favorites',
        'context.copyToClipboard': 'Copy',
        'context.search': 'Search in context...',
        'context.searchResults': 'found',
        'context.noResults': 'Nothing found',
        'context.doubleClickToView': 'Double-click to view',
        'context.settings': 'Storage settings',
        'context.maxContexts': 'Max contexts',
        'context.maxStorage': 'Max storage (MB)',
        'context.autoCleanupDays': 'Auto-delete after (days)',
        'context.autoCleanupOnLimit': 'Delete old on limit',
        'context.confirmDelete': 'Confirm deletion',
        'context.confirmDeleteMessage': 'Are you sure you want to delete context "{name}"?',
        'context.confirmDeleteMultiple': 'Delete {count} contexts?',
        'context.cancel': 'Cancel',
        'context.sortBy': 'Sort by',
        'context.sortByDate': 'By date',
        'context.sortByName': 'By name',
        'context.sortBySize': 'By size',
        'context.filterFavorites': 'Favorites only',
        'context.selectAll': 'Select all',
        'context.deselectAll': 'Deselect all',
        'context.deleteSelected': 'Delete selected',
        'context.renamed': 'Context renamed',
        'context.duplicated': 'Context duplicated',
        'context.deleted': 'Context deleted',
        'context.merge': 'Merge',
        'context.mergeSelected': 'Merge selected',
        'context.merged': 'Contexts merged',
        'context.mergedName': 'Merged context',
        'context.selectToMerge': 'Select 2+ contexts to merge',
        'context.dragHint': 'Drag to reorder',

        // Action Bar
        'action.project': 'Project',
        'action.changeProject': 'Change Project',
        'action.model': 'Model',
        'action.tokens': 'Tokens',
        'action.cost': 'Cost',
        'action.buildContext': 'Build Context',
        'action.copy': 'Copy',
        'action.export': 'Export',
        'action.generateSolution': 'Generate Solution',

        // Right Sidebar
        'tools.title': 'Tools',
        'tools.description': 'Additional functions and settings',
        'tools.copyContext': 'Copy Context',
        'tools.exportContext': 'Export Context',
        'tools.clearContext': 'Clear Context',
        'tools.contextStats': 'Context Statistics',
        'tools.files': 'Files',
        'tools.aiModel': 'AI Model',
        'tools.selectedModel': 'Selected model',
        'tools.aiChat': 'AI Chat',

        // New Sidebar Sections
        'sidebar.stats': 'Statistics',
        'sidebar.history': 'History',
        'sidebar.exportSettings': 'Export',
        'sidebar.prompts': 'Prompts',
        'sidebar.chat': 'AI Chat',
        'sidebar.settings': 'AI Settings',
        'sidebar.toggle': 'Tools Panel',

        // File Stats
        'stats.byType': 'By file type',
        'stats.byFolder': 'By folder',
        'stats.totalFiles': 'Total files',
        'stats.totalLines': 'Total lines',
        'stats.totalTokens': 'Total tokens',
        'stats.estimatedCost': 'Estimated cost',

        // History
        'history.title': 'Context History',
        'history.empty': 'History is empty',
        'history.load': 'Load',
        'history.delete': 'Delete',
        'history.ago': 'ago',
        'history.justNow': 'just now',
        'history.minutesAgo': 'min ago',
        'history.hoursAgo': 'h ago',
        'history.daysAgo': 'd ago',

        // Export Settings
        'export.format': 'Format',
        'export.markdown': 'Markdown',
        'export.plainText': 'Plain text',
        'export.json': 'JSON',
        'export.xml': 'XML',
        'export.includeMetadata': 'Include metadata',
        'export.includeLineNumbers': 'Line numbers',
        'export.includeSeparators': 'File separators',
        'export.wrapInCodeBlocks': 'Wrap in code blocks',
        'export.maxLineLength': 'Max line length',
        'export.unlimited': 'Unlimited',

        // Prompt Templates
        'prompts.title': 'Prompt Templates',
        'prompts.empty': 'No saved templates',
        'prompts.add': 'Add template',
        'prompts.edit': 'Edit',
        'prompts.delete': 'Delete',
        'prompts.use': 'Use',
        'prompts.copy': 'Copy',
        'prompts.name': 'Template name',
        'prompts.content': 'Prompt text',
        'prompts.placeholder': 'Enter prompt text...',
        'prompts.variables': 'Variables: {context}, {files}, {tokens}',
        'prompts.saved': 'Template saved',
        'prompts.deleted': 'Template deleted',
        'prompts.copied': 'Prompt copied',
        'prompts.default.review': 'Code Review',
        'prompts.default.explain': 'Explain Code',
        'prompts.default.refactor': 'Refactor',
        'prompts.default.tests': 'Write Tests',

        // AI Chat
        'chat.title': 'AI Chat',
        'chat.placeholder': 'Type a message...',
        'chat.send': 'Send',
        'chat.clear': 'Clear chat',
        'chat.thinking': 'AI is thinking...',
        'chat.error': 'Send error',
        'chat.retry': 'Retry',
        'chat.copy': 'Copy',
        'chat.useContext': 'Use context',
        'chat.noApiKey': 'API key not configured',
        'chat.configureApi': 'Configure API',
        'chat.welcome': 'Hi! I can help analyze your code.',
        'chat.contextAttached': 'Context attached',

        // Model Limits
        'limits.tokens': 'tokens',
        'limits.used': 'used',
        'limits.contextUsed': 'Context',
        'limits.available': 'Available',
        'limits.maxContext': 'Max context',
        'limits.estCost': 'Est. cost',
        'limits.nearLimit': 'Approaching context limit',
        'limits.criticalWarning': 'Critical! Reduce context size',

        // AI Settings
        'settings.aiProvider': 'AI Provider',
        'settings.selectProvider': 'Select provider',
        'settings.apiKey': 'API Key',
        'settings.apiKeyPlaceholder': 'Enter API key...',
        'settings.selectModel': 'Model',
        'settings.hostUrl': 'Host URL',
        'settings.save': 'Save',
        'settings.saving': 'Saving...',
        'settings.saved': 'Settings saved',
        'settings.saveFailed': 'Failed to save',
        'sidebar.settings': 'Settings',

        // Tabs
        'tabs.files': 'Files',
        'tabs.git': 'Git',
        'tabs.contexts': 'Contexts',
        'tabs.tools': 'Tools',
        'tabs.chat': 'AI Chat',

        // Git Source
        'git.title': 'Git Source',
        'git.localGit': 'Local Git',
        'git.remoteUrl': 'Remote URL',
        'git.currentBranch': 'Current branch',
        'git.branches': 'Branches',
        'git.commits': 'Commits',
        'git.buildingFrom': 'Building context from',
        'git.clear': 'Clear',
        'git.filesAtRef': 'Files at',
        'git.selectAll': 'Select All',
        'git.clearSelection': 'Clear',
        'git.buildContext': 'Build Context from',
        'git.repoUrl': 'Repository URL',
        'git.urlPlaceholder': 'https://github.com/user/repo.git',
        'git.urlHint': 'Supports GitHub, GitLab, Bitbucket and any public Git URL',
        'git.clone': 'Clone Repository',
        'git.cloning': 'Cloning...',
        'git.cloned': 'Repository cloned',
        'git.openProject': 'Open Project',
        'git.remove': 'Remove',
        'git.notGitRepo': 'Current project is not a Git repository',
        'git.openGitProject': 'Open a project with .git folder or use Remote URL tab',
        'git.current': 'current',
        'git.selected': 'selected',
        'git.filesSelected': 'files selected',
        'git.noCheckout': 'Files will be read from this ref without checkout',
        'git.load': 'Load',
        'git.githubApi': 'GitHub API (fast, no clone)',
        'git.searchFiles': 'Search files...',
        'git.recent': 'Recent',
        'git.recentRepos': 'Recent repositories',
        'git.clearHistory': 'Clear',
        'git.cloneRequired': 'URL not directly supported. Clone required:',
        'git.restoredSelection': 'Restored file selection',
        'git.compareBranches': 'Compare Branches',
        'git.baseBranch': 'Base branch',
        'git.compareBranch': 'Compare branch',
        'git.swapBranches': 'Swap branches',
        'git.noDifferences': 'No differences between branches',
        'git.filesChanged': 'files changed',
        'git.close': 'Close',
        'git.diff': 'Diff',

        // Toasts
        'toast.selectFiles': 'Select files to build context',
        'toast.contextBuilt': 'Context built successfully',
        'toast.contextError': 'Error building context',
        'toast.contextCopied': 'Context copied to clipboard',
        'toast.copyError': 'Error copying context',
        'toast.buildFirst': 'Build context first',
        'toast.contextCleared': 'Context cleared',
        'toast.contextEmpty': 'Context is already empty',
        'toast.solutionSoon': 'Solution generation - coming soon',
        'toast.noFiles': 'No files selected',
        'toast.refreshed': 'File tree refreshed',
        'toast.refreshError': 'Failed to refresh file tree',

        // Errors
        'error.generic': 'An error occurred',
        'error.loadFailed': 'Failed to load data',
        'error.saveFailed': 'Failed to save',
        'error.networkError': 'Network error',
        'error.notFound': 'Not found',
        'error.invalidData': 'Invalid data',
        'error.suggestions': 'Suggestions',
        'error.checkFiles': 'Check that files are within the project directory',
        'error.checkPaths': 'Verify file paths don\'t contain ".." or absolute paths',
        'error.tryRefresh': 'Try refreshing the file tree',
        'error.emptyContext': 'Context built but empty',

        // Hotkeys
        'hotkey.buildContext': 'Build Context (Ctrl+B)',
        'hotkey.export': 'Export Context (Ctrl+E)',
        'hotkey.copy': 'Copy Context (Ctrl+Shift+C)',
        'hotkey.changeProject': 'Change Project (Ctrl+Shift+P)',

        // File Filter
        'filter.byType': 'Filter by type',
        'filter.types': 'types',
        'filter.type': 'type',
        'filter.searchExtensions': 'Search extensions...',
        'filter.selectAll': 'Select All',
        'filter.clear': 'Clear',
        'filter.code': 'Code',
        'filter.styles': 'Styles',
        'filter.config': 'Config',
        'filter.documentation': 'Documentation',
        'filter.other': 'Other',

        // Context Menu
        'contextMenu.selectAll': 'Select All in Folder',
        'contextMenu.deselectAll': 'Deselect All in Folder',
        'contextMenu.copyPath': 'Copy Path',
        'contextMenu.copyRelativePath': 'Copy Relative Path',
        'contextMenu.addToIgnore': 'Add to Ignore',
        'contextMenu.removeFromIgnore': 'Remove from Ignore',
        'contextMenu.expandAll': 'Expand All',
        'contextMenu.collapseAll': 'Collapse All',

        // Ignore Rules Modal
        'ignoreModal.title': 'Ignore Rules Management',
        'ignoreModal.subtitle': 'Manage .gitignore and custom ignore rules',
        'ignoreModal.customRules': 'Custom Rules',
        'ignoreModal.gitignoreInfo': 'This file is managed by Git. Edit it directly in your project.',
        'ignoreModal.gitignorePlaceholder': 'No .gitignore file found',
        'ignoreModal.rulesCount': 'Rules',
        'ignoreModal.testRules': 'Test Rules',
        'ignoreModal.customPlaceholder': '# Example:\n*.log\ntemp/\nnode_modules/',
        'ignoreModal.preview': 'Preview',
        'ignoreModal.filesWillBeIgnored': 'files will be ignored',
        'ignoreModal.andMore': 'and {count} more',
        'ignoreModal.reset': 'Reset',
        'ignoreModal.clearAll': 'Clear All',
        'ignoreModal.cancel': 'Cancel',
        'ignoreModal.save': 'Save',
        'ignoreModal.testComplete': 'Test completed',
        'ignoreModal.testFailed': 'Test failed',
        'ignoreModal.saved': 'Rules saved successfully',
        'ignoreModal.saveFailed': 'Failed to save rules',

        // Settings Panel
        'settings.title': 'File Explorer Settings',
        'settings.useGitignore': 'Use .gitignore',
        'settings.useCustomIgnore': 'Use custom ignore rules',
        'settings.autoSaveSelection': 'Auto-save selection',
        'settings.compactFolders': 'Compact nested folders',
        'settings.ignoreRules': 'Ignore Rules',
        'settings.presets': 'Presets',
        'settings.restoreSelection': 'Restore previous selection ({count} files)',

        // Quick Filters
        'quick.sourceFiles': 'Source Files',
        'quick.tests': 'Tests',
        'quick.config': 'Config',
        'quick.docs': 'Docs',
        'quick.styles': 'Styles',
        'quick.modified': 'Recently Modified',
        'quick.clear': 'Clear',

        // Presets Modal
        'presets.title': 'Selection Presets',
        'presets.subtitle': 'Save and load file selections',
        'presets.saveNew': 'Save Current Selection',
        'presets.name': 'Preset name...',
        'presets.description': 'Description (optional)...',
        'presets.save': 'Save Preset ({count} files)',
        'presets.saved': 'Saved Presets',
        'presets.noPresets': 'No presets saved yet',
        'presets.files': 'files',
        'presets.load': 'Load',
        'presets.delete': 'Delete',
        'presets.close': 'Close',
        'presets.loaded': 'Preset loaded',
        'presets.deleted': 'Preset deleted',
        'presets.saveSuccess': 'Preset "{name}" saved',
        'presets.edit': 'Edit',
        'presets.cancelEdit': 'Cancel',
        'presets.saveEdit': 'Save Changes',
        'presets.confirmDelete': 'Confirm Deletion',
        'presets.confirmDeleteMessage': 'Are you sure you want to delete preset "{name}"?',
        'presets.cancel': 'Cancel',
        'presets.showFiles': 'Show Files',
        'presets.hideFiles': 'Hide Files',
        'presets.invalidFiles': '{count} files do not exist',
        'presets.allFilesValid': 'All files exist',
        'presets.editSuccess': 'Preset updated',
        'presets.editFailed': 'Failed to update preset',
        'presets.filesInPreset': 'Files in preset:',
    }
}

const currentLocale = ref<Locale>((localStorage.getItem('app-locale') as Locale) || 'ru')

export function useI18n() {
    const t = (key: string): string => {
        const locale = currentLocale.value
        const dict = translations[locale] as Record<string, string>
        return dict[key] || key
    }

    const setLocale = (locale: Locale) => {
        currentLocale.value = locale
        localStorage.setItem('app-locale', locale)
    }

    const locale = computed(() => currentLocale.value)

    return {
        t,
        locale,
        setLocale
    }
}
