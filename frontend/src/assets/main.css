/* Shotgun Frontend - Consolidated Tailwind-First Approach */

/* Import minimal design tokens */
@import './design-tokens.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {

    /* Design Tokens - Only essential custom properties that extend Tailwind */
    :root {
        /* App-specific semantic tokens that map to Tailwind utilities */
        --app-surface-primary: theme('colors.slate.900');
        --app-surface-secondary: theme('colors.slate.800');
        --app-text-primary: theme('colors.slate.100');
        --app-text-secondary: theme('colors.slate.300');

        /* Glass morphism effects */
        --glass-bg: rgba(15, 23, 42, 0.85);
        --glass-border: rgba(148, 163, 184, 0.1);
        --glass-backdrop: blur(12px);

        /* Focus ring using Tailwind colors */
        --focus-ring: 0 0 0 2px theme('colors.blue.500');
        --focus-ring-offset: 0 0 0 2px theme('colors.slate.900'), 0 0 0 4px theme('colors.blue.500');
    }

    /* Base styles */
    * {
        box-sizing: border-box;
    }

    html,
    body {
        margin: 0;
        padding: 0;
        height: 100%;
    }

    body {
        @apply font-sans text-slate-100 bg-slate-900 antialiased;
    }

    #app {
        @apply h-screen overflow-hidden;
    }

    /* Focus styles using Tailwind */
    *:focus {
        outline: none;
    }

    *:focus-visible {
        @apply outline-2 outline-blue-500 outline-offset-2;
    }

    /* Selection styles using Tailwind */
    ::selection {
        @apply bg-blue-500/30 text-white;
    }

    ::-moz-selection {
        @apply bg-blue-500/30 text-white;
    }

    /* Scrollbar styling using Tailwind colors */
    ::-webkit-scrollbar {
        @apply w-2 h-2;
    }

    ::-webkit-scrollbar-track {
        @apply bg-slate-700/30 rounded;
    }

    ::-webkit-scrollbar-thumb {
        @apply bg-slate-600/50 rounded transition-colors hover:bg-slate-600/70;
    }
}

@layer components {

    /* Essential component patterns that are reused across the app */
    .btn-primary {
        @apply px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white font-medium rounded-lg transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 relative overflow-hidden;
    }

    .btn-primary:hover {
        @apply -translate-y-0.5 shadow-lg;
    }

    .btn-primary:active {
        @apply translate-y-0 transition-[transform] duration-75;
    }

    .btn-secondary {
        @apply px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white font-medium rounded-lg transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-500;
    }

    .input-field {
        @apply w-full px-3 py-2 bg-slate-700/50 border border-slate-600/50 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent focus:scale-[1.01] transition-all;
    }

    .card {
        @apply bg-slate-800/50 rounded-xl border border-slate-700/50;
    }

    .panel {
        @apply bg-slate-800/90 backdrop-blur-sm border border-slate-700/50 rounded-lg shadow-xl;
    }

    /* Glass morphism components */
    .glass {
        background: var(--glass-bg);
        backdrop-filter: var(--glass-backdrop);
        @apply border border-slate-700/50;
    }

    .glass-strong {
        @apply bg-slate-800/95 backdrop-blur-md border border-slate-700/50;
    }

    /* Enhanced drawer/modal components with animations */
    .drawer {
        @apply fixed inset-y-0 right-0 w-full max-w-md bg-gradient-to-b from-slate-900 to-slate-800 border-l border-slate-700 shadow-2xl transform transition-transform duration-300 ease-in-out z-50 flex flex-col;
    }

    .drawer-open {
        @apply translate-x-0;
    }

    .drawer-closed {
        @apply translate-x-full;
    }

    .modal-overlay {
        @apply fixed inset-0 bg-black/50 backdrop-blur-sm z-40 transition-opacity duration-300;
    }

    .modal-content {
        @apply fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-slate-800 rounded-xl border border-slate-700 shadow-2xl max-w-lg w-full mx-4 z-50 transition-all duration-300;
    }

    /* Progress bar with shimmer animation */
    .progress-bar {
        @apply relative overflow-hidden transition-[width] duration-300 ease-out;
    }

    .progress-bar::after {
        @apply absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent;
        content: '';
        animation: shimmer 2s infinite;
    }

    /* File and context item animations */
    .file-item-hover {
        @apply transition-all duration-150 ease-out hover:translate-x-0.5 hover:shadow-md;
    }

    .context-item {
        @apply transition-all duration-200;
    }

    /* Drag and drop states */
    .drag-preview {
        @apply transition-all duration-150 ease-out rotate-1 scale-105 shadow-2xl z-[1000];
    }

    .drop-zone-active {
        animation: pulse-blue var(--duration-slow) ease-in-out infinite alternate;
    }

    /* Status indicators */
    .status-indicator {
        @apply transition-all duration-150 ease-out;
    }

    .status-healthy {
        animation: pulse-green 2s ease-in-out infinite;
    }
}

@layer utilities {
    /* Custom utilities that extend Tailwind */

    /* Panel header utility */
    .panel-header {
        @apply px-3 py-2 bg-gray-800/50 border-b border-gray-700 text-sm font-medium text-gray-300;
    }

    /* Action button utility */
    .action-button {
        @apply px-3 py-1.5 bg-gray-800 hover:bg-gray-700 text-white text-xs rounded transition-all duration-200 flex items-center gap-2;
    }

    /* Stat badge utility */
    .stat-badge {
        @apply inline-flex items-center px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded-full border border-blue-500/30;
    }

    .text-gradient {
        @apply bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent;
    }

    .text-gradient-success {
        @apply bg-gradient-to-r from-green-400 to-emerald-400 bg-clip-text text-transparent;
    }

    .text-gradient-warning {
        @apply bg-gradient-to-r from-yellow-400 to-orange-400 bg-clip-text text-transparent;
    }

    .text-gradient-error {
        @apply bg-gradient-to-r from-red-400 to-rose-400 bg-clip-text text-transparent;
    }

    /* Memory-safe animations using Tailwind's animate utilities */
    .animate-fade-in {
        @apply animate-in fade-in duration-300;
    }

    .animate-slide-in-right {
        @apply animate-in slide-in-from-right duration-300;
    }

    .animate-slide-in-left {
        @apply animate-in slide-in-from-left duration-300;
    }

    .animate-scale-in {
        @apply animate-in zoom-in-95 duration-200;
    }

    /* Vue transition utilities */
    .vue-enter-active,
    .vue-leave-active {
        @apply transition-all duration-300 ease-out;
    }

    .vue-enter-from {
        @apply opacity-0 translate-y-2 scale-95;
    }

    .vue-leave-to {
        @apply opacity-0 -translate-y-2 scale-105;
    }

    /* Workspace mode transitions */
    .workspace-transition-enter-active,
    .workspace-transition-leave-active {
        @apply transition-all duration-300 ease-out;
    }

    .workspace-transition-enter-from {
        @apply opacity-0 translate-x-5;
    }

    .workspace-transition-leave-to {
        @apply opacity-0 -translate-x-5;
    }

    /* Panel slide transitions */
    .panel-slide-left-enter-active,
    .panel-slide-left-leave-active {
        @apply transition-all duration-300 ease-out;
    }

    .panel-slide-left-enter-from,
    .panel-slide-left-leave-to {
        @apply -translate-x-full opacity-0;
    }

    .panel-slide-right-enter-active,
    .panel-slide-right-leave-active {
        @apply transition-all duration-300 ease-out;
    }

    .panel-slide-right-enter-from,
    .panel-slide-right-leave-to {
        @apply translate-x-full opacity-0;
    }

    /* Toast notification transitions */
    .toast-enter-active {
        @apply transition-all duration-300;
        transition-timing-function: var(--ease-bounce);
    }

    .toast-enter-from {
        @apply opacity-0 -translate-y-5 scale-90;
    }

    .toast-leave-active {
        @apply transition-all duration-300 ease-out;
    }

    .toast-leave-to {
        @apply opacity-0 translate-x-24 scale-95;
    }

    /* Modal transitions */
    .modal-backdrop-enter-active,
    .modal-backdrop-leave-active {
        @apply transition-opacity duration-300 ease-out;
    }

    .modal-backdrop-enter-from,
    .modal-backdrop-leave-to {
        @apply opacity-0;
    }

    .modal-enter-active {
        @apply transition-all duration-300 ease-out;
    }

    .modal-enter-from {
        @apply opacity-0 -translate-y-5 scale-95;
    }

    .modal-leave-active {
        @apply transition-all duration-150 ease-out;
    }

    .modal-leave-to {
        @apply opacity-0 translate-y-2 scale-105;
    }

    /* Context item transitions */
    .context-item-enter-active {
        @apply transition-all duration-300;
        transition-timing-function: var(--ease-bounce);
    }

    .context-item-enter-from {
        @apply opacity-0 -translate-y-2 scale-90;
    }

    .context-item-leave-active {
        @apply transition-all duration-150 ease-out;
    }

    .context-item-leave-to {
        @apply opacity-0 translate-x-5 scale-95;
    }

    /* Interactive state utilities */
    .hover-lift {
        @apply transition-transform duration-200 hover:scale-[1.02] active:scale-[0.98];
    }

    .hover-glow {
        @apply transition-shadow duration-300 hover:shadow-lg hover:shadow-blue-500/25;
    }

    /* Status indicator utilities */
    .status-success {
        @apply bg-green-500/20 text-green-400 border-green-500/30;
    }

    .status-warning {
        @apply bg-yellow-500/20 text-yellow-400 border-yellow-500/30;
    }

    .status-error {
        @apply bg-red-500/20 text-red-400 border-red-500/30;
    }

    .status-info {
        @apply bg-blue-500/20 text-blue-400 border-blue-500/30;
    }

    /* Context display utilities */
    .context-content {
        user-select: text;
        cursor: text;
    }

    .context-line {
        transition: background-color 0.2s ease;
    }

    .context-fade-in {
        animation: fadeIn 0.3s ease-in;
    }

    /* Memory usage indicator utilities */
    .memory-safe {
        @apply bg-green-500/10 border-green-500/20;
    }

    .memory-warning {
        @apply bg-yellow-500/10 border-yellow-500/20;
    }

    .memory-critical {
        @apply bg-red-500/10 border-red-500/20;
    }

    /* Animation control utilities */
    .animate-none {
        animation: none !important;
        transition: none !important;
    }

    .animate-fast {
        transition-duration: var(--duration-fast) !important;
    }

    .animate-slow {
        transition-duration: var(--duration-slow) !important;
    }
}

/* Additional context-specific animations */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Essential app-specific animations that extend Tailwind */

/* Animation variables matching Tailwind's duration scale */
:root {
    --duration-fast: 150ms;
    --duration-normal: 250ms;
    --duration-slow: 350ms;

    /* Animation easings */
    --ease-out-quad: cubic-bezier(0.25, 0.46, 0.45, 0.94);
    --ease-out-cubic: cubic-bezier(0.215, 0.61, 0.355, 1);
    --ease-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* Essential custom keyframes for app-specific animations */
@keyframes pulse-glow {

    0%,
    100% {
        box-shadow: 0 0 5px rgba(59, 130, 246, 0.5);
    }

    50% {
        box-shadow: 0 0 20px rgba(59, 130, 246, 0.8);
    }
}

@keyframes pulse-green {

    0%,
    100% {
        box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7);
    }

    50% {
        box-shadow: 0 0 0 4px rgba(34, 197, 94, 0);
    }
}

@keyframes pulse-blue {
    from {
        border-color: theme('colors.blue.500');
        background-color: theme('colors.blue.500/5');
    }

    to {
        border-color: theme('colors.blue.400');
        background-color: theme('colors.blue.500/10');
    }
}

@keyframes shimmer {
    0% {
        transform: translateX(-100%);
    }

    100% {
        transform: translateX(100%);
    }
}

/* App-specific animation utilities */
.animate-pulse-glow {
    animation: pulse-glow 2s ease-in-out infinite;
}

.animate-pulse-green {
    animation: pulse-green 2s ease-in-out infinite;
}

.animate-pulse-blue {
    animation: pulse-blue var(--duration-slow) ease-in-out infinite alternate;
}

.animate-shimmer {
    animation: shimmer 2s infinite;
}

/* High contrast mode support */
@media (prefers-contrast: more) {
    .glass {
        @apply bg-slate-900 border-slate-600;
    }

    .btn-primary {
        @apply bg-blue-600 hover:bg-blue-500;
        background-image: none;
    }
}

/* File Explorer Animations */
.settings-panel-enter-active {
    transition: all 0.25s cubic-bezier(0.215, 0.61, 0.355, 1);
}

.settings-panel-enter-from {
    opacity: 0;
    transform: translateY(-10px);
    max-height: 0;
}

.settings-panel-leave-active {
    transition: all 0.2s ease-out;
}

.settings-panel-leave-to {
    opacity: 0;
    transform: translateY(-10px);
    max-height: 0;
}

.context-menu-enter-active {
    transition: all 0.15s cubic-bezier(0.215, 0.61, 0.355, 1);
}

.context-menu-enter-from {
    opacity: 0;
    transform: scale(0.95) translateY(-5px);
}

.context-menu-leave-active {
    transition: all 0.1s ease-out;
}

.context-menu-leave-to {
    opacity: 0;
    transform: scale(0.95);
}

@keyframes pulse-selection {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0.6;
    }
}

.selection-indicator {
    animation: pulse-selection 2s ease-in-out infinite;
}

.ignored-file {
    transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
}

.ignored-file:hover {
    opacity: 0.8;
    background-color: rgba(239, 68, 68, 0.1);
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
    .hover-lift {
        @apply transform-none;
    }

    .animate-fade-in,
    .animate-slide-in-right,
    .animate-slide-in-left,
    .animate-scale-in {
        animation: none;
        @apply transition-none;
    }

    .settings-panel-enter-active,
    .settings-panel-leave-active,
    .context-menu-enter-active,
    .context-menu-leave-active {
        transition: none !important;
    }

    .selection-indicator {
        animation: none;
    }
}

/*
 Tooltip Animations */
@keyframes tooltip-fade-in {
    from {
        opacity: 0;
        transform: translateX(-50%) translateY(4px);
    }

    to {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
    }
}

@keyframes tooltip-fade-out {
    from {
        opacity: 1;
    }

    to {
        opacity: 0;
    }
}

.animate-tooltip-in {
    animation: tooltip-fade-in 0.2s ease-out forwards;
}

.animate-tooltip-out {
    animation: tooltip-fade-out 0.15s ease-in forwards;
}

/* Hover Effects */
.hover-scale-sm {
    transition: transform 0.15s ease-out;
}

.hover-scale-sm:hover {
    transform: scale(1.02);
}

.hover-brightness {
    transition: filter 0.15s ease-out;
}

.hover-brightness:hover {
    filter: brightness(1.1);
}

.hover-shadow-glow {
    transition: box-shadow 0.15s ease-out;
}

.hover-shadow-glow:hover {
    box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
}